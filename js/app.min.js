(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function c(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(o){if(o.ep)return;o.ep=!0;const n=c(o);fetch(o.href,n)}})();let bodyLockStatus=!0,bodyLockToggle=(r=500)=>{document.documentElement.hasAttribute("data-fls-scrolllock")?bodyUnlock(r):bodyLock(r)},bodyUnlock=(r=500)=>{if(bodyLockStatus){const t=document.querySelectorAll("[data-fls-lp]");setTimeout(()=>{t.forEach(c=>{c.style.paddingRight=""}),document.body.style.paddingRight="",document.documentElement.removeAttribute("data-fls-scrolllock")},r),bodyLockStatus=!1,setTimeout(function(){bodyLockStatus=!0},r)}},bodyLock=(r=500)=>{if(bodyLockStatus){const t=document.querySelectorAll("[data-fls-lp]"),c=window.innerWidth-document.body.offsetWidth+"px";t.forEach(e=>{e.style.paddingRight=c}),document.body.style.paddingRight=c,document.documentElement.setAttribute("data-fls-scrolllock",""),bodyLockStatus=!1,setTimeout(function(){bodyLockStatus=!0},r)}};function menuInit(){document.addEventListener("click",function(r){bodyLockStatus&&r.target.closest("[data-fls-menu]")&&(bodyLockToggle(),document.documentElement.toggleAttribute("data-fls-menu-open"))})}document.querySelector("[data-fls-menu]")&&window.addEventListener("load",menuInit);const searchBox=document.querySelector(".top-header__search-box"),searchBtn=document.querySelector(".top-header__search"),searchInput=document.querySelector(".top-header__input"),catalogItems=document.querySelectorAll(".catalog__item"),searchResultsContainer=document.createElement("div");searchResultsContainer.className="search-results",searchBox.appendChild(searchResultsContainer);function searchProducts(r){const t=r.toLowerCase();searchResultsContainer.innerHTML="";let c=[];catalogItems.forEach(e=>{const o=e.querySelector(".item-catalog__title").textContent.trim().toLowerCase(),n=e.querySelector(".item-catalog__price span").textContent.trim();o.includes(t)&&c.push({title:o,price:n})}),c.length>0?(c.forEach(e=>{const o=document.createElement("div");o.className="search-results__item",o.textContent=`${e.title} - ${e.price} \u0433\u0440\u043D`,searchResultsContainer.appendChild(o)}),searchResultsContainer.classList.add("active")):(searchResultsContainer.innerHTML='<div class="search-results__item">\u041D\u0456\u0447\u043E\u0433\u043E \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E</div>',searchResultsContainer.classList.add("active"))}searchInput.addEventListener("input",()=>{const r=searchInput.value.trim();r.length>0?searchProducts(r):searchResultsContainer.classList.remove("active")}),searchBtn.addEventListener("click",r=>{r.preventDefault(),searchBox.classList.contains("active")?searchInput.value.trim()!==""&&searchProducts(searchInput.value.trim()):(searchBox.classList.add("active"),searchInput.focus())}),document.addEventListener("click",r=>{searchBox.contains(r.target)||(searchBox.classList.remove("active"),searchResultsContainer.classList.remove("active"),searchInput.value="")});const cartBtn=document.querySelector(".cart-btn"),cartPopup=document.querySelector(".cart-popup"),cartClose=document.querySelector(".cart-popup__close"),removeButtons=document.querySelectorAll(".remove-item"),cartCount=document.querySelector(".cart-count"),cartTotal=document.querySelector(".cart-total");cartBtn.addEventListener("click",()=>{cartPopup.classList.add("active")}),cartClose.addEventListener("click",()=>{cartPopup.classList.remove("active")}),window.addEventListener("click",r=>{r.target===cartPopup&&cartPopup.classList.remove("active")}),removeButtons.forEach(r=>{r.addEventListener("click",function(){this.closest(".cart-item").remove(),updateCart()})});function updateCart(){const r=document.querySelectorAll(".cart-item");let t=0;r.forEach(c=>{t+=parseInt(c.querySelector("strong").innerText)}),cartCount.innerText=r.length,cartTotal.innerText=`\u0412\u0441\u044C\u043E\u0433\u043E: ${t} \u20B4`,r.length||(document.querySelector(".cart-items").innerHTML='<p class="cart-empty">\u041A\u043E\u0440\u0437\u0438\u043D\u0430 \u043F\u0443\u0441\u0442\u0430</p>')}const checkoutBtn=document.querySelector(".cart-checkout"),orderPopup=document.querySelector(".order-popup"),orderClose=document.querySelector(".order-popup__close"),paymentRadios=document.querySelectorAll('input[name="payment"]'),cardSection=document.querySelector(".order-card");checkoutBtn.addEventListener("click",()=>{cartPopup.classList.remove("active"),orderPopup.classList.add("active")}),orderClose.addEventListener("click",()=>{orderPopup.classList.remove("active")}),window.addEventListener("click",r=>{r.target===orderPopup&&orderPopup.classList.remove("active")}),paymentRadios.forEach(r=>{r.addEventListener("change",()=>{r.value==="card"?cardSection.style.display="block":cardSection.style.display="none"})});const orderSubmit=document.querySelector(".order-submit");orderSubmit.addEventListener("click",()=>{alert("\u0412\u0430\u0448\u0435 \u0437\u0430\u043C\u043E\u0432\u043B\u0435\u043D\u043D\u044F \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0435! \u041C\u0438 \u0437\u0432\u2019\u044F\u0436\u0435\u043C\u043E\u0441\u044F \u0437 \u0432\u0430\u043C\u0438 \u0434\u043B\u044F \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u043D\u044F."),orderPopup.classList.remove("active")});class DynamicAdapt{constructor(){this.type="max",this.init()}init(){this.objects=[],this.daClassname="--dynamic",this.nodes=[...document.querySelectorAll("[data-fls-dynamic]")],this.nodes.forEach(t=>{const e=t.dataset.flsDynamic.trim().split(","),o={};o.element=t,o.parent=t.parentNode,o.destinationParent=e[3]&&t.closest(e[3].trim())||document,e[3]&&e[3].trim();const n=e[0]?e[0].trim():null;if(n){const s=o.destinationParent.querySelector(n);s&&(o.destination=s)}o.breakpoint=e[1]?e[1].trim():"767.98",o.place=e[2]?e[2].trim():"last",o.index=this.indexInParent(o.parent,o.element),this.objects.push(o)}),this.arraySort(this.objects),this.mediaQueries=this.objects.map(({breakpoint:t})=>`(${this.type}-width: ${t/16}em),${t}`).filter((t,c,e)=>e.indexOf(t)===c),this.mediaQueries.forEach(t=>{const c=t.split(","),e=window.matchMedia(c[0]),o=c[1],n=this.objects.filter(({breakpoint:s})=>s===o);e.addEventListener("change",()=>{this.mediaHandler(e,n)}),this.mediaHandler(e,n)})}mediaHandler(t,c){t.matches?c.forEach(e=>{e.destination&&this.moveTo(e.place,e.element,e.destination)}):c.forEach(({parent:e,element:o,index:n})=>{o.classList.contains(this.daClassname)&&this.moveBack(e,o,n)})}moveTo(t,c,e){c.classList.add(this.daClassname);const o=t==="last"||t==="first"?t:parseInt(t,10);o==="last"||o>=e.children.length?e.append(c):o==="first"?e.prepend(c):e.children[o].before(c)}moveBack(t,c,e){c.classList.remove(this.daClassname),t.children[e]!==void 0?t.children[e].before(c):t.append(c)}indexInParent(t,c){return[...t.children].indexOf(c)}arraySort(t){if(this.type==="min")t.sort((c,e)=>c.breakpoint===e.breakpoint?c.place===e.place?0:c.place==="first"||e.place==="last"?-1:c.place==="last"||e.place==="first"?1:0:c.breakpoint-e.breakpoint);else{t.sort((c,e)=>c.breakpoint===e.breakpoint?c.place===e.place?0:c.place==="first"||e.place==="last"?1:c.place==="last"||e.place==="first"?-1:0:e.breakpoint-c.breakpoint);return}}}document.querySelector("[data-fls-dynamic]")&&window.addEventListener("load",()=>new DynamicAdapt),document.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector(".catalog__sort");r.addEventListener("click",t=>{r.classList.toggle("active")}),document.addEventListener("click",t=>{r.contains(t.target)||r.classList.remove("active")})}),document.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector(".catalog__filter"),t=document.querySelector(".catalog__filter-modal"),c=document.querySelector(".catalog__filter-close");r&&t&&c&&(r.addEventListener("click",()=>{t.classList.add("active"),document.body.style.overflow="hidden"}),c.addEventListener("click",()=>{t.classList.remove("active"),document.body.style.overflow=""}),t.addEventListener("click",e=>{e.target===t&&(t.classList.remove("active"),document.body.style.overflow="")}))});
